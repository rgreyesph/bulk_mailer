{% extends "mailer_app/base.html" %}

{% block title %}{{ title|default:"Manage Contact" }} - Bulk Emailer{% endblock %}

{% block page_title %}{{ title|default:"Manage Contact" }}{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto card">
    <h2 class="text-xl font-semibold mb-6 text-indigo-700">{{ title }}</h2>
    <form method="post" class="space-y-6">
        {% csrf_token %}

        {% if form.non_field_errors %}
            <div class="alert alert-danger">
                {% for error in form.non_field_errors %}<p>{{ error }}</p>{% endfor %}
            </div>
        {% endif %}

        {% for field in form %}
        <div>
            <label for="{{ field.id_for_label }}" class="label-text">{{ field.label }}</label>
            {{ field }} {% if field.help_text %}
            <p class="mt-1 text-xs text-gray-500">{{ field.help_text|safe }}</p>
            {% endif %}
            {% for error in field.errors %}
            <p class="text-red-500 text-xs mt-1">{{ error }}</p>
            {% endfor %}
        </div>
        {% endfor %}
        
        <div class="flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0 pt-4">
            <button type="submit" class="btn w-full sm:w-auto">
                {% if contact %}Update Contact{% else %}Add Contact{% endif %}
            </button>
            <a href="{% if contact %}{% url 'mailer_app:view_contact_list' list_id=contact.contact_list.id %}{% else %}{% url 'mailer_app:view_contact_list' list_id=contact_list.id %}{% endif %}" 
               class="btn-secondary w-full sm:w-auto text-center">
               Cancel
            </a>
        </div>
    </form>
</div>
{% endblock %}
