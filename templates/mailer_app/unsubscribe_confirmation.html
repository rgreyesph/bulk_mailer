{% extends "mailer_app/public_base.html" %} {# MODIFIED HERE #}

{% block title %}Unsubscribe Status{% endblock %}

{% block page_title %}Unsubscribe Status{% endblock %}

{% block content %}
    {% if success %}
        <div class="alert alert-success">
            <h5 class="font-semibold text-lg" style="margin-bottom: 0.5rem;">Successfully Unsubscribed!</h5>
            <p>{% autoescape off %}{{ confirmation_message }}{% endautoescape %}</p>
            <p class="text-sm mt-1">We're sorry to see you go. You can re-subscribe at any time through our website.</p>
        </div>
    {% elif success is None %}
        <div class="alert alert-info">
            <h5 class="font-semibold text-lg" style="margin-bottom: 0.5rem;">Already Unsubscribed</h5>
            <p>{% autoescape off %}{{ confirmation_message }}{% endautoescape %}</p>
            <p class="text-sm mt-1">No further action is needed.</p>
        </div>
    {% else %}
        <div class="alert alert-danger">
            <h5 class="font-semibold text-lg" style="margin-bottom: 0.5rem;">Unsubscribe Failed</h5>
            <p>{{ message|safe|default:"An error occurred. Could not process your unsubscribe request. Please try again or contact support." }}</p>
        </div>
    {% endif %}

    {# Display Django Messages Framework messages, if any #}
    {% if messages %}
        <div class="mt-4 space-y-2">
        {% for framework_message in messages %}
            <div class="alert {% if 'success' in framework_message.tags %}alert-success{% elif 'error' in framework_message.tags %}alert-danger{% elif 'warning' in framework_message.tags %}alert-warning{% else %}alert-info{% endif %}" role="alert">
                <p class="font-medium">
                    {% if 'error' in framework_message.tags %}Error
                    {% elif 'warning' in framework_message.tags %}Warning
                    {% elif 'success' in framework_message.tags %}Success
                    {% else %}Info{% endif %}:
                    <span class="font-normal">{{ framework_message|safe }}</span>
                </p>
            </div>
        {% endfor %}
        </div>
    {% endif %}

    <hr>
    <div class="text-center">
        <a href="{{ site_home_url|default:'/' }}" class="btn">Go to Our Website</a>
    </div>
{% endblock %}